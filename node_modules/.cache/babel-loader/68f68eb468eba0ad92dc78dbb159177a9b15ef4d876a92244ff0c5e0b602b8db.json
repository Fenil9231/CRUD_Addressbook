{"ast":null,"code":"import _regeneratorRuntime from\"/home/fenil/git_Repos/CRUD_Addressbook/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/home/fenil/git_Repos/CRUD_Addressbook/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/home/fenil/git_Repos/CRUD_Addressbook/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useEffect,useState}from\"react\";import Swal from\"sweetalert2\";// import { Button } from \"../../Buttons/button\";\nimport\"./user.css\";import{BASEURL}from\"../services/api\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var User=function User(){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),users=_useState2[0],setUsers=_useState2[1];var _useState3=useState(null),_useState4=_slicedToArray(_useState3,2),userIdToDelete=_useState4[0],setUserIdToDelete=_useState4[1];var _useState5=useState(''),_useState6=_slicedToArray(_useState5,2),error=_useState6[0],setError=_useState6[1];console.log(users);useEffect(function(){fetchData();},[]);var fetchData=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var response,data;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return fetch(\"\".concat(BASEURL,\"/users\"));case 3:response=_context.sent;if(!response.ok){setError(\"Error \".concat(response.status,\": \").concat(response.statusText));}_context.next=7;return response.json();case 7:data=_context.sent;setUsers(data);_context.next=15;break;case 11:_context.prev=11;_context.t0=_context[\"catch\"](0);Swal.fire({icon:'error',title:'Oops...',text:'Something went wrong!',footer:\"\".concat(_context.t0.message,\" \").concat(error,\" Please Try Again After Some Time ...\")});console.error(_context.t0);case 15:case\"end\":return _context.stop();}},_callee,null,[[0,11]]);}));return function fetchData(){return _ref.apply(this,arguments);};}();if(!users){return/*#__PURE__*/_jsx(\"div\",{children:\"Loading...\"});}var handleDelete=function handleDelete(id){setUserIdToDelete(id);Swal.fire({title:\"Are you sure?\",text:\"You won't be able to revert this!\",icon:\"warning\",showCancelButton:true,confirmButtonColor:\"#3085d6\",cancelButtonColor:\"#d33\",confirmButtonText:\"Yes, delete it!\",allowOutsideClick:false}).then(function(result){if(result.isConfirmed){fetch(\"\".concat(BASEURL,\"/users/\").concat(id),{method:\"DELETE\"}).then(function(res){return res.json();}).then(function(){fetchData();setUserIdToDelete(null);Swal.fire(\"Deleted!\",\"Your file has been deleted.\",\"success\");});}else{setUserIdToDelete(null);}});};return/*#__PURE__*/_jsx(\"div\",{className:\"container\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"user-container\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"container mt-4\",children:/*#__PURE__*/_jsx(\"div\",{className:\"row\",children:/*#__PURE__*/_jsx(\"div\",{className:\"col\",children:/*#__PURE__*/_jsx(\"button\",{className:\"refresh-button\",onClick:fetchData,children:\"Refresh\"})})})}),/*#__PURE__*/_jsx(\"div\",{className:\"container mt-4\",children:/*#__PURE__*/_jsxs(\"table\",{className:\"table table-striped table-bordered\",children:[/*#__PURE__*/_jsx(\"thead\",{className:\"thead-dark\",children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\"Sr No\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Name\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Email\"}),/*#__PURE__*/_jsx(\"th\",{children:\"City\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Phone\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Actions\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:users.map(function(_ref2,index){var id=_ref2.id,name=_ref2.name,email=_ref2.email,city=_ref2.city,phoneNumber=_ref2.phoneNumber;return/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:index+1}),/*#__PURE__*/_jsx(\"td\",{children:name}),/*#__PURE__*/_jsx(\"td\",{children:email}),/*#__PURE__*/_jsx(\"td\",{children:city}),/*#__PURE__*/_jsx(\"td\",{className:\"number\",children:phoneNumber.map(function(num,idx){return/*#__PURE__*/_jsx(\"div\",{children:num},idx);})}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(\"button\",{className:\"delete-button\",onClick:function onClick(){return handleDelete(id);},children:\"Delete\"})})]},id);})})]})})]})});};export default User;","map":{"version":3,"names":["React","useEffect","useState","Swal","BASEURL","jsx","_jsx","jsxs","_jsxs","User","_useState","_useState2","_slicedToArray","users","setUsers","_useState3","_useState4","userIdToDelete","setUserIdToDelete","_useState5","_useState6","error","setError","console","log","fetchData","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","response","data","wrap","_callee$","_context","prev","next","fetch","concat","sent","ok","status","statusText","json","t0","fire","icon","title","text","footer","message","stop","apply","arguments","children","handleDelete","id","showCancelButton","confirmButtonColor","cancelButtonColor","confirmButtonText","allowOutsideClick","then","result","isConfirmed","method","res","className","onClick","map","_ref2","index","name","email","city","phoneNumber","num","idx"],"sources":["/home/fenil/git_Repos/CRUD_Addressbook/src/components/User.jsx"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\r\nimport Swal from \"sweetalert2\";\r\n// import { Button } from \"../../Buttons/button\";\r\nimport \"./user.css\";\r\nimport { BASEURL } from \"../services/api\";\r\n\r\nconst User = () => {\r\n  const [users, setUsers] = useState([]);\r\n  const [userIdToDelete, setUserIdToDelete] = useState(null);\r\n  const [error, setError] = useState('')\r\n  console.log(users);\r\n  useEffect(() => {\r\n    fetchData();\r\n  }, []);\r\n\r\n  const fetchData = async () => {\r\n    try {\r\n      const response = await fetch(`${BASEURL}/users`);\r\n      \r\n      if (!response.ok) {\r\n         setError(`Error ${response.status}: ${response.statusText}`) \r\n      }\r\n  \r\n      const data = await response.json();\r\n      setUsers(data);\r\n    } catch (e) {\r\n      Swal.fire({\r\n        icon: 'error',\r\n        title: 'Oops...',\r\n        text: 'Something went wrong!',\r\n        footer: `${e.message} ${error} Please Try Again After Some Time ...`\r\n      });\r\n      console.error(e);\r\n    }\r\n  };\r\n  \r\n  if(!users){\r\n    return <div>Loading...</div>;\r\n  }\r\n\r\n  const handleDelete = (id) => {\r\n    setUserIdToDelete(id);\r\n\r\n    Swal.fire({\r\n      title: \"Are you sure?\",\r\n      text: \"You won't be able to revert this!\",\r\n      icon: \"warning\",\r\n      showCancelButton: true,\r\n      confirmButtonColor: \"#3085d6\",\r\n      cancelButtonColor: \"#d33\",\r\n      confirmButtonText: \"Yes, delete it!\",\r\n      allowOutsideClick: false,\r\n    }).then((result) => {\r\n      if (result.isConfirmed) {\r\n        fetch(`${BASEURL}/users/${id}`, {\r\n          method: \"DELETE\",\r\n        })\r\n          .then((res) => res.json())\r\n          .then(() => {\r\n            fetchData();\r\n            setUserIdToDelete(null);\r\n            Swal.fire(\"Deleted!\", \"Your file has been deleted.\", \"success\");\r\n          });\r\n      } else {\r\n        setUserIdToDelete(null);\r\n      }\r\n    });\r\n  };\r\n  return (\r\n    <div className=\"container\">\r\n      <div className=\"user-container\">\r\n        <div className=\"container mt-4\">\r\n          <div className=\"row\">\r\n            <div className=\"col\">\r\n              <button className=\"refresh-button\" onClick={fetchData}>\r\n                Refresh\r\n              </button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n        <div className=\"container mt-4\">\r\n          <table className=\"table table-striped table-bordered\">\r\n            <thead className=\"thead-dark\">\r\n              <tr>\r\n                <th>Sr No</th>\r\n                <th>Name</th>\r\n                <th>Email</th>\r\n                <th>City</th>\r\n                <th>Phone</th>\r\n                <th>Actions</th>\r\n              </tr>\r\n            </thead>\r\n            <tbody>\r\n              {users.map(({ id, name, email, city, phoneNumber }, index) => {\r\n                return (\r\n                  <tr key={id}>\r\n                    <td>{index + 1}</td>\r\n                    <td>{name}</td>\r\n                    <td>{email}</td>\r\n                    <td>{city}</td>\r\n                    <td className=\"number\">\r\n                      {phoneNumber.map((num, idx) => (\r\n                        <div key={idx}>{num}</div>\r\n                      ))}\r\n                    </td>\r\n                    <td>\r\n                      <button\r\n                        className=\"delete-button\"\r\n                        onClick={() => handleDelete(id)}\r\n                      >\r\n                        Delete\r\n                      </button>\r\n                    </td>\r\n                  </tr>\r\n                );\r\n              })}\r\n            </tbody>\r\n          </table>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default User;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}